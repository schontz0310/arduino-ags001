#define success_width 74
#define success_height 60
const uint8_t success[] U8G_PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xc0, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xc0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xff,
   0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xff, 0x03, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0xff, 0x07, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xfc, 0xff, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xff, 0xff, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xff, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0xff,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xff, 0x7f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xff, 0x3f, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0xf8, 0xff, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xf8, 0xff, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe,
   0xff, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xff, 0x03,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x01, 0x00, 0x00,
   0x00, 0x80, 0x00, 0x00, 0x80, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0xc0,
   0x01, 0x00, 0xe0, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x03, 0x00,
   0xe0, 0xff, 0x3f, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x07, 0x00, 0xf0, 0xff,
   0x1f, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x0f, 0x00, 0xf8, 0xff, 0x0f, 0x00,
   0x00, 0x00, 0x00, 0xfc, 0x1f, 0x00, 0xfe, 0xff, 0x07, 0x00, 0x00, 0x00,
   0x00, 0xfe, 0x3f, 0x00, 0xfe, 0xff, 0x03, 0x00, 0x00, 0x00, 0x00, 0xff,
   0x7f, 0x00, 0xff, 0xff, 0x01, 0x00, 0x00, 0x00, 0x80, 0xff, 0xff, 0x80,
   0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xc1, 0xff, 0x7f,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xff, 0xe3, 0xff, 0x3f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0xfc, 0xff, 0xff, 0xff, 0x1f, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xfc, 0xff, 0xff, 0xff, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0,
   0xff, 0xff, 0xff, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xff, 0xff,
   0xff, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0xff, 0xff, 0x01,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xff, 0xff, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xfc, 0xff, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0xff,
   0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xff, 0x0f, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xff, 0x03, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xc0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };


#define error_width 44
#define error_height 64
const uint8_t error[] U8G_PROGMEM = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xe0, 0x01, 0x00, 0x00, 0x78, 0x00, 0xf0, 0x03, 0x00, 0x00, 0xfc, 0x00,
   0xf8, 0x07, 0x00, 0x00, 0xfe, 0x01, 0xfc, 0x0f, 0x00, 0x00, 0xff, 0x03,
   0xfe, 0x1f, 0x00, 0x80, 0xff, 0x07, 0xff, 0x3f, 0x00, 0xc0, 0xff, 0x0f,
   0xff, 0x7f, 0x00, 0xe0, 0xff, 0x0f, 0xff, 0xff, 0x00, 0xf0, 0xff, 0x0f,
   0xff, 0xff, 0x01, 0xf8, 0xff, 0x0f, 0xfe, 0xff, 0x03, 0xfc, 0xff, 0x07,
   0xfc, 0xff, 0x07, 0xfe, 0xff, 0x03, 0xf8, 0xff, 0x0f, 0xff, 0xff, 0x01,
   0xf0, 0xff, 0x9f, 0xff, 0xff, 0x00, 0xe0, 0xff, 0xff, 0xff, 0x7f, 0x00,
   0xc0, 0xff, 0xff, 0xff, 0x3f, 0x00, 0x80, 0xff, 0xff, 0xff, 0x1f, 0x00,
   0x00, 0xff, 0xff, 0xff, 0x0f, 0x00, 0x00, 0xfe, 0xff, 0xff, 0x07, 0x00,
   0x00, 0xfc, 0xff, 0xff, 0x03, 0x00, 0x00, 0xf8, 0xff, 0xff, 0x01, 0x00,
   0x00, 0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0xe0, 0xff, 0x7f, 0x00, 0x00,
   0x00, 0xe0, 0xff, 0x7f, 0x00, 0x00, 0x00, 0xf0, 0xff, 0xff, 0x00, 0x00,
   0x00, 0xf8, 0xff, 0xff, 0x01, 0x00, 0x00, 0xfc, 0xff, 0xff, 0x03, 0x00,
   0x00, 0xfe, 0xff, 0xff, 0x07, 0x00, 0x00, 0xff, 0xff, 0xff, 0x0f, 0x00,
   0x80, 0xff, 0xff, 0xff, 0x1f, 0x00, 0xc0, 0xff, 0xff, 0xff, 0x3f, 0x00,
   0xe0, 0xff, 0xff, 0xff, 0x7f, 0x00, 0xf0, 0xff, 0x9f, 0xff, 0xff, 0x00,
   0xf8, 0xff, 0x0f, 0xff, 0xff, 0x01, 0xfc, 0xff, 0x07, 0xfe, 0xff, 0x03,
   0xfe, 0xff, 0x03, 0xfc, 0xff, 0x07, 0xff, 0xff, 0x01, 0xf8, 0xff, 0x0f,
   0xff, 0xff, 0x00, 0xf0, 0xff, 0x0f, 0xff, 0x7f, 0x00, 0xe0, 0xff, 0x0f,
   0xff, 0x3f, 0x00, 0xc0, 0xff, 0x0f, 0xfe, 0x1f, 0x00, 0x80, 0xff, 0x07,
   0xfc, 0x0f, 0x00, 0x00, 0xff, 0x03, 0xf8, 0x07, 0x00, 0x00, 0xfe, 0x01,
   0xf0, 0x03, 0x00, 0x00, 0xfc, 0x00, 0xe0, 0x01, 0x00, 0x00, 0x78, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };


const uint8_t img_bitmap[] U8G_PROGMEM = 
{

  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0xff, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0x1f, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0,
  0xff, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0xf0, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xff, 0xff, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc,
  0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0xfe, 0xff, 0xff, 0xf8, 0x03, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xf8, 0xff,
  0xff, 0xff, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff,
  0xff, 0xff, 0xf8, 0xff, 0xff, 0xff, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xc0, 0xff, 0xff, 0xff, 0xf8, 0xff, 0xff, 0xff, 0x3f, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xff, 0xff, 0xff, 0xf8, 0xff,
  0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xff,
  0xff, 0xff, 0xf8, 0xff, 0xff, 0xff, 0xff, 0x03, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xf8, 0xff, 0xff, 0xff, 0xf8, 0xff, 0xff, 0xff, 0xff, 0x0f,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0xff, 0xff, 0xff, 0xf8, 0xff,
  0xff, 0xff, 0xff, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0xff,
  0xff, 0xff, 0xf8, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00,
  0x00, 0xe0, 0xff, 0xff, 0xff, 0xff, 0xf8, 0xff, 0xff, 0xff, 0xff, 0xff,
  0x03, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xff, 0xff, 0xff, 0xff, 0xf8, 0x03,
  0x00, 0x80, 0xff, 0xff, 0x0f, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xff, 0xff,
  0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xff, 0x3f, 0x00, 0x00, 0x00,
  0x00, 0xfc, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xff,
  0x7f, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xff, 0xff, 0xfc, 0xff, 0x00, 0x00,
  0x00, 0x00, 0xe0, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x7f,
  0xf8, 0xff, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x3f, 0x00, 0x00, 0x00,
  0x80, 0xff, 0xff, 0x3f, 0xf0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe,
  0x1f, 0x00, 0x00, 0x00, 0xc0, 0xff, 0xff, 0x1f, 0xe0, 0xff, 0x00, 0x00,
  0x00, 0x00, 0x00, 0xf8, 0x0f, 0x00, 0x00, 0x00, 0xe0, 0xff, 0xff, 0x0f,
  0xc0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x07, 0x00, 0x00, 0x00,
  0xf0, 0xff, 0xff, 0x07, 0xc0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80,
  0x03, 0x00, 0x00, 0x00, 0xf8, 0xff, 0xff, 0x03, 0xfc, 0xff, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0xff, 0xff, 0x01,
  0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xfc, 0xff, 0xff, 0xc0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0xf8, 0xff, 0x7f, 0xe0, 0x07, 0xfe, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xff, 0x3f, 0xe0,
  0x01, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xe1, 0xff, 0x1f, 0xf0, 0x00, 0xf8, 0x00, 0xff, 0x0f, 0xe0, 0x3f, 0x00,
  0x00, 0x00, 0x00, 0x00, 0xc3, 0xff, 0x0f, 0x70, 0x00, 0xfc, 0x00, 0xff,
  0x1f, 0xf8, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x87, 0xff, 0x07, 0x78,
  0x00, 0x7e, 0x00, 0xff, 0x3f, 0xfc, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x0f, 0xff, 0x03, 0x38, 0x00, 0x3f, 0x00, 0xff, 0x3f, 0xfe, 0xff, 0x01,
  0x00, 0x00, 0x00, 0x00, 0x1f, 0xfe, 0x01, 0x3c, 0x80, 0x1f, 0x00, 0xff,
  0x3f, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xfc, 0x00, 0x3c,
  0xc0, 0x0f, 0x00, 0xff, 0x1f, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x7f, 0xf8, 0x00, 0x1e, 0xe0, 0x07, 0x00, 0x3f, 0x80, 0x3f, 0x30, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x7f, 0xf0, 0x01, 0x1e, 0xf0, 0x03, 0x00, 0x3f,
  0x80, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xe0, 0x03, 0x0e,
  0xf8, 0x01, 0x00, 0x3f, 0x80, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x1f, 0xc0, 0x07, 0x0e, 0xfc, 0x00, 0x00, 0x3f, 0xc0, 0x0f, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x0f, 0x80, 0x0f, 0x06, 0x7e, 0x00, 0x00, 0x3f,
  0xc0, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x1f, 0x00,
  0x3f, 0x00, 0x00, 0x3f, 0xc0, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x03, 0x00, 0x3e, 0x80, 0x1f, 0x00, 0x00, 0x1f, 0xc0, 0x0f, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x7c, 0xc0, 0x0f, 0x00, 0x00, 0x00,
  0xc0, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xe0,
  0x07, 0x00, 0x00, 0x00, 0xe0, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xf0, 0xff, 0x03, 0x00, 0x00, 0x00, 0xf8, 0x63, 0x3c, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xff, 0x01, 0x00, 0x00, 0x00,
  0xfe, 0xf3, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x7f,
  0x00, 0x00, 0x00, 0x00, 0xfe, 0xf9, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xf9, 0xff, 0x01,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xfe, 0xf8, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x3e, 0xf0, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x80, 0x03, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00

};

void visorBegin(){
  if ( display.getMode() == U8G_MODE_R3G3B2 )
    display.setColorIndex(255);   // white
  else if ( display.getMode() == U8G_MODE_GRAY2BIT )
    display.setColorIndex(1);     // max intensity
  else if ( display.getMode() == U8G_MODE_BW )
    display.setColorIndex(1);     // pixel on
  display.setContrast(0x30);
}

void visorDrawSetup(ScreenName screen, int interval, uint8_t status){
  _screen = screen;
  uint8_t _status = status;
  int _interval = interval;

  switch (_screen)
  {
  case SCREEN_DRAW_LOGO:
    display.firstPage();
    do {
      display.drawXBMP( 8, 0, 128, 64, img_bitmap);
    } while (display.nextPage());
    delay(_interval);  
  break;
  
  case SCREEN_INIT:
    display.firstPage();
    do {
      (getUID()).toCharArray(_buffer, 24);
      display.setFont(u8g_font_unifont);
      display.drawStr( 25, 12, F("SISTEMA DE"));
      display.drawStr( 26, 12, F("SISTEMA DE"));
      display.drawStr( 12, 27, F("ABASTECIMENTO"));
      display.drawStr( 13, 27, F("ABASTECIMENTO"));
      display.drawStr( 14, 42, F("AGS-001 V1.0"));
      display.drawStr( 15, 42, F("AGS-001 V1.0"));
      display.setFont(u8g_font_6x10);
      display.drawStr( 0, 57, F("UID"));
      display.drawStr( 21, 57, _buffer);
    } while (display.nextPage());
    delay(_interval);  
  break;

  case SCREEN_VERIFY_DATA_LOGGER_SD:
    display.firstPage();
    do {
      if (_status == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = OK"));
      }

      if (_status == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = XX"));
      }
    } while (display.nextPage());
    delay(_interval);  
  break;

  case SCREEN_VERIFY_DATA_LOGGER_RTC:
    display.firstPage();
    do {
      if (stateCheck[0] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = OK"));
      }
      if (stateCheck[0] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = XX"));
      }
      if (_status == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = OK"));
      }
      if (_status == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = XX"));
      }
    } while (display.nextPage());
    delay(_interval);  
  break;

  case SCREEN_VERIFY_RFID:
    display.firstPage();
    do {
      if (stateCheck[0] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = OK"));
      }

      if (stateCheck[0] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = XX"));
      }

      if (stateCheck[1] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = OK"));
      }

      if (stateCheck[1] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = XX"));
      }

      if (_status == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 30, F("RFID           = OK"));
      }

      if (_status == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 30, F("RFID           = XX"));
      }

    } while (display.nextPage());
    delay(_interval);  
  break;

  case SCREEN_VERIFY_MODEM:
    display.firstPage();
    do {
      if (stateCheck[0] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = OK"));
      }

      if (stateCheck[0] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = XX"));
      }

      if (stateCheck[1] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = OK"));
      }

      if (stateCheck[1] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = XX"));
      }

      if (stateCheck[2] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 30, F("RFID           = OK"));
      }

      if (stateCheck[2] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 30, F("RFID           = XX"));
      }

      if (_status == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 40, F("MODEM GPRS     = OK"));
      }

      if (_status == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 40, F("MODEM GPRS     = XX"));
      }

    } while (display.nextPage());
    delay(_interval);  
  break;

  case SCREEN_VERIFY_MQTT:
    display.firstPage();
    do {
      if (stateCheck[0] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = OK"));
      }

      if (stateCheck[0] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 10, F("DATALOOGER SD  = XX"));
      }

      if (stateCheck[1] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = OK"));
      }

      if (stateCheck[1] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 20, F("DATALOOGER RTC = XX"));
      }

      if (stateCheck[2] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 30, F("RFID           = OK"));
      }

      if (stateCheck[2] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 30, F("RFID           = XX"));
      }

      if (stateCheck[3] == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 40, F("MODEM GPRS     = OK"));
      }

      if (stateCheck[3] == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 40, F("MODEM GPRS     = XX"));
      }

      if (_status == 0) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 50, F("CONEXAO MQTT   = OK"));
      }

      if (_status == 1) {
        display.setFont(u8g_font_6x10);
        display.drawStr( 0, 50, F("CONEXAO MQTT   = XX"));
      }

    } while (display.nextPage());
    delay(_interval);  
  break;

  default:
    break;
  }
}


void visorDrawMenu(ScreenName targetScreen){
  int _status;
  _screen = targetScreen;

  switch (_screen)
  {
    case SCREEN_MENU_PRINCIPAL:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 10, 12, "MENU PRINCIPAL");
        display.drawStr( 11, 12, "MENU PRINCIPAL");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "CADASTROS");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
        display.drawStr( 27, 44, "CONFIGORACOES");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);
        display.drawStr( 27, 60, "ENTRADAS");
        display.drawStr( 6, 60, "3");
        display.drawRFrame(1, 49, 15, 15, 3);
      } while (display.nextPage());  
    break;
    case SCREEN_MENU_CADASTRO:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 27, 12, "CADASTROS");
        display.drawStr( 28, 12, "CADASTROS");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "OPERADORES");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
        display.drawStr( 27, 44, "VEICULOS");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);
        display.drawStr( 27, 60, "PERMISSOES");
        display.drawStr( 6, 60, "3");
        display.drawRFrame(1, 49, 15, 15, 3);
      } while (display.nextPage());  
    break;

    case SCREEN_MENU_CONFIGURACAO:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 27, 12, "CONFIGURACAO");
        display.drawStr( 28, 12, "CONFIGURACAO");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "REGISTRO");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
      } while (display.nextPage());  
    break;
    
    case SCREEN_ACCCESSES:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 7, 12, "TELA DE ACESSO");
        display.drawStr( 8, 12, "TELA DE ACESSO");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "ACESSO COM SENHA");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
        display.drawStr( 27, 44, "ACESSO COM CARTAO");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);
        display.drawStr( 27, 60, "CANCELAR");
        display.drawStr( 6, 60, "*");
        display.drawRFrame(1, 49, 15, 15, 3);
      } while (display.nextPage());  
    break;
    
    case SCREEN_ACCCESSES_PASSWORD:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "DIGITE A SENHA");
        display.drawStr( 22, 25, "  DE  ACESSO  ");
        display.drawStr( 3, 60, "APERTE '*' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;

    case SCREEN_ACCCESSES_CARD:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "PASSE O CARTAO");
        display.drawStr( 22, 25, "  DE  ACESSO  ");
        display.drawStr( 3, 60, "APERTE '*' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    
    case SCREEN_MENU_CADASTRO_OPERADOR_CHOICE:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 1, 12, "ESCOLHA A OPCAO");
        display.drawStr( 2, 12, "ESCOLHA A OPCAO");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "INCLUIR OPERADOR");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
        display.drawStr( 27, 44, "EXCLUIR OPERADOR");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);
      } while (display.nextPage());  
    break;
    case SCREEN_MENU_CADASTRO_OPERADOR_READ_CARD:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "APROXIME A TAG");
        display.drawStr( 22, 25, " DO  OPERADOR ");
        display.drawStr( 3, 60, "APERTE '*' PARA CANCELAR");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_MENU_CADASTRO_OPERADOR_READ_NAME:
      
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "DIGITE O NOME ");
        display.drawStr( 22, 25, " DO OPERADOR  ");
        display.drawStr( 3, 60, "APERTE '*' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());
    break;

    case SCREEN_MENU_CADASTRO_OPERADOR_READ_LEVEL:
      
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 1, 12, "ESCOLHA O NIVEL");
        display.drawStr( 2, 12, "ESCOLHA O NIVEL");

        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "ADMINISTRADOR");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);

        display.drawStr( 27, 44, "FRENTISTA");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);

        display.drawStr( 27, 60, "MOTORISTA");
        display.drawStr( 6, 60, "3");
        display.drawRFrame(1, 49, 15, 15, 3);
      } while (display.nextPage());
    break;

    case SCREEN_MENU_CADASTRO_VEHICLE_CHOICE:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 1, 12, "ESCOLHA A OPCAO");
        display.drawStr( 2, 12, "ESCOLHA A OPCAO");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "INCLUIR VEICULO");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
        display.drawStr( 27, 44, "EXCLUIR VEICULO");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);
      } while (display.nextPage());  
    break;
    case SCREEN_MENU_CADASTRO_VEHICLE_READ_CARD:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "APROXIME A TAG");
        display.drawStr( 22, 25, " DO   VEICULO ");
        display.drawStr( 3, 60, "APERTE '*' PARA CANCELAR");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_MENU_CADASTRO_VEHICLE_READ_NAME:
      
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "DIGITE O NOME ");
        display.drawStr( 22, 25, "  DO VEICULO  ");
        display.drawStr( 3, 60, "APERTE '*' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());
    break;
    case SCREEN_MENU_CADASTRO_VEHICLE_READ_LEVEL:
      
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 1, 12, "ESCOLHA O TIPO ");
        display.drawStr( 2, 12, "ESCOLHA O TIPO ");
        display.drawStr( 1, 28, "DE COMBUSTIVEL ");
        display.drawStr( 2, 28, "DE COMBUSTIVEL ");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 44, "S10");
        display.drawStr( 6, 44, "1");
        display.drawRFrame(1, 33, 15, 15, 3);

        display.drawStr( 27, 60, "S500");
        display.drawStr( 6, 60, "2");
        display.drawRFrame(1, 49, 15, 15, 3);
      } while (display.nextPage());
    break;
    case SCREEN_MENU_CADASTRO_PERMISSION_CHOICE:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 1, 12, "ESCOLHA A OPCAO");
        display.drawStr( 2, 12, "ESCOLHA A OPCAO");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "INCLUIR PERMISSAO");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
        display.drawStr( 27, 44, "EXCLUIR PERMISSAO");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);
      } while (display.nextPage());  
    break;
    case SCREEN_CONFIGURACAO_REGISTRO_CHOICE:
      display.firstPage();
      do {
        display.setFont(u8g_font_unifont);
        display.drawStr( 1, 12, "ESCOLHA A OPCAO");
        display.drawStr( 2, 12, "ESCOLHA A OPCAO");
        display.setFont(u8g_font_6x10);
        display.drawStr( 27, 28, "INCLUIR REGISTRO");
        display.drawStr( 6, 28, "1");
        display.drawRFrame(1, 17, 15, 15, 3);
        display.drawStr( 27, 44, "EXCLUIR REGISTRO");
        display.drawStr( 6, 44, "2");
        display.drawRFrame(1, 33, 15, 15, 3);
      } while (display.nextPage());  
    break;
    case SCREEN_CONFIGURACAO_REGISTRO:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, " INSIRA O CNPJ ");
        display.drawStr( 22, 25, "  DA EMPRESA  ");
        display.drawStr( 3, 60, "APERTE '*' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;

    case SCREEN_PROGRESS:
        _status  = _status + 10;       
        if (_status >= 100 ){
          _status = 0;
        };
      display.firstPage();
      do {
        _status++;   
        display.setFont(u8g_font_unifont);
        display.drawStr( 20, 27, F("PROCESSANDO"));
        display.drawStr( 21, 27, F("PROCESSANDO"));
        display.drawFrame(12,40,100,10);
        display.drawBox(12,40,_status,10);
      } while (display.nextPage());
    break;

    case SCREEN_ERROR: {
      display.firstPage();
      do {
        display.drawXBMP((128 - error_width)/2, 0, error_width, error_height, error);
      } while (display.nextPage()); 
    }
    break;
    case SCREEN_SUCCESS:
      display.firstPage();
      do {
        display.drawXBMP((128 - success_width)/2, 0, success_width, success_height, success);
      } while (display.nextPage());
    break;
  }
}


void menuAssignDeviceRegister(){
  companyNumber = keyboardGetKeyAlfanumeric(SCREEN_CONFIGURACAO_REGISTRO);
  companyNumber.trim();
  Serial.println("compainha = " + companyNumber);
  if(dataLoggerCheckCompanyExist(companyNumber)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Cadastro existente");
    delay(1500);
    loop();
  }
  dataLoggerWriteCompanyRegisterInDatalogger();
  visorDrawMenu(SCREEN_PROGRESS);
  jsonPayload = jsonAssignCompanyMount();
  Serial.println(jsonPayload);
    visorDrawMenu(SCREEN_PROGRESS);
  if(mqttSend(TOPIC_REGISTER, jsonPayload)){
    Serial.println("Eviou MQTT");
    visorDrawMenu(SCREEN_SUCCESS);
    somCerto();
    delay(1500);
    loop();
  }else{
    dataloggerWriteFailMqttLog(jsonPayload);
    Serial.println("Erro MQTT final");
    visorDrawMenu(SCREEN_SUCCESS);
    somCerto();
    delay(1500);
    loop();
  }
  loop();
}


void visorDrawScreen(ScreenName targetScreen, String value){
  _screen = targetScreen;
  String _name = value;
  switch (_screen)
  {
    case SCREEN_PUMP_CHARGE_FUEL:
      _name.toCharArray(_buffer, 24);
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15,"    LITROS    ");
        display.drawStr( 22, 25," ABASTECIDOS  ");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());
    break;
  }
}


void visorReadCard(ScreenName screen, String name, String cardID){
  _screen = screen;
  String _name = name;
  String _cardID = cardID;  
  memset(_buffer, 0, sizeof(_buffer));
  switch (_screen)
  {
    case SCREEN_OPERATOR_READ:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "PASSE O CARTAO");
        display.drawStr( 22, 25, " DO  OPERADOR ");
        display.drawStr( 3, 60, "APERTE 'A' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_OPERATOR_SEARCH:
      _cardID.toCharArray(_buffer, 24);
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "PROCURANDO POR");
        display.drawStr( 22, 25, "   OPERADOR   ");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_OPERATOR_FOUND:
      _name.toCharArray(_buffer, 24);
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "   OPERADOR   ");
        display.drawStr( 22, 25, "  ENCONTRADO  ");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_OPERATOR_NOT_FOUND:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, " OPERADOR NAO ");
        display.drawStr( 22, 25, "  ENCONTRADO  ");
        display.drawStr( 3, 60, "APERTE 'A' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;

    case SCREEN_VEHICLE_READ:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "PASSE O CARTAO");
        display.drawStr( 22, 25, "  DO  VEICULO ");
        display.drawStr( 3, 60, "APERTE 'A' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_VEHICLE_SEARCH:
      _cardID.toCharArray(_buffer, 24);
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "PROCURANDO POR");
        display.drawStr( 22, 25, "    VEICULO   ");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_VEHICLE_FOUND:
      _name.toCharArray(_buffer, 24);
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, "    VEICULO   ");
        display.drawStr( 22, 25, "  ENCONTRADO  ");
        display.setFont(u8g_font_unifont);
        display.drawStr( 4, 45, _buffer);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
    case SCREEN_VEHICLE_NOT_FOUND:
      display.firstPage();
      do {
        display.setFont(u8g_font_6x10);
        display.drawStr( 22, 15, " VEICULO  NAO ");
        display.drawStr( 22, 25, "  ENCONTRADO  ");
        display.drawStr( 3, 60, "APERTE 'A' PARA MENU");
        display.setFont(u8g_font_unifont);
        display.drawRFrame(1, 31, 126, 18, 5);
      } while (display.nextPage());  
    break;
  }
}


void visorMenuPrincipal(){
  Serial.println(F(" ENTROU MENU PRINCIPAL"));
  visorDrawMenu(SCREEN_MENU_PRINCIPAL);
  do {
    tecla_presionada = keyboard.getKey();
  }
  while (!tecla_presionada);   

  switch (tecla_presionada)       
  {
    case '1':
      visorMenuCadastro();
      Serial.println(F("BOTAO 1"));
      break;
    case '2':
      visorMenuConfiguracao();
      Serial.println(F("BOTAO 2"));
      break;
    case '3':
      //Menu_Entradas();
      Serial.println(F("BOTAO 3"));
      break;
    case '4':
    case '5':
    case '6':
    case '7':
    case '8':
    case '9':
    case '0':
    case '*':
    case '#':
    case 'A':
    case 'B':
    case 'C':
    case 'D':
      loop();
      Serial.println(F("SAIU DO MENU"));
      break;
  }
}


void visorMenuCadastro(){
  Serial.println(F("ENTROU MENU CADASTRO"));
  visorDrawMenu(SCREEN_MENU_CADASTRO);
  do {
    tecla_presionada = keyboard.getKey();
  } while (!tecla_presionada);
  switch (tecla_presionada)
  {
    case '1':
      visorMenuAccesses(SCREEN_MENU_CADASTRO_OPERADOR_CHOICE);
      Serial.println(F("BOTAO 1 - CADASTRO DE OPERADOR"));
      break;
    case '2':
      visorMenuAccesses(SCREEN_MENU_CADASTRO_VEHICLE_CHOICE);
      Serial.println(F("BOTAO 2 - CADASTRO DE VEICULO"));
      break;
    case '3':
      visorMenuAccesses(SCREEN_MENU_CADASTRO_PERMISSION_CHOICE);
      Serial.println(F("BOTAO 3 - CADASTRO DE PERMISSAO"));
      break;
    case '4':
    case '5':
    case '6':
    case '7':
    case '8':
    case '9':
    case '0':
    case '*':
    case '#':
    case 'A':
    case 'B':
    case 'C':
    case 'D':
      Serial.println(F("SAIU DO MENU"));
      loop();
      break;
  }
}


void visorMenuCadastroVeiculo(){
  Serial.println(F("entrou na funcao menuCadastroVeiculo"));
  memset(_buffer, 0, sizeof(_buffer));  
  visorDrawMenu(SCREEN_MENU_CADASTRO_VEHICLE_READ_CARD);
  do {
    successRead =  rfidReaderGetID();
    tecla_presionada = keyboard.getKey();
    if ( tecla_presionada == '*') {
      Serial.println(F("CANCELADO"));
      loop();
    }
  } while (!successRead);

  Serial.print(F("menuCadastroVeiculo   ======== leu tag  "));
  Serial.println((rfidReaderIDValue));
  tagUuid = rfidReaderIDValue;
  tagUuid.toCharArray(_buffer, 24);
  visorDrawMenu(SCREEN_MENU_CADASTRO_VEHICLE_READ_CARD);
  memset(_buffer, 0, sizeof(_buffer));
  delay(1200);
 //check if card exist
  visorDrawMenu(SCREEN_PROGRESS);
  if (!SD.begin(PIN_SS_DATA_LOG)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Erro no sistema para gravar informacoes");
    delay(1500);
    loop();
  }
  if(dataloggerCheckVehicleExist(tagUuid)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Cartao com cadastro existente");
    delay(1500);
    loop();
  }
  _vehicleName = keyboardGetKeyAlfanumeric(SCREEN_MENU_CADASTRO_VEHICLE_READ_NAME);
  _vehicleName.trim();
  Serial.println("Veiculo = " + _vehicleName);
 //enter vehicle fuel type
  visorDrawMenu(SCREEN_MENU_CADASTRO_VEHICLE_READ_LEVEL);
  do {
    tecla_presionada = keyboard.getKey();  
  } while (!tecla_presionada);
  switch (tecla_presionada)
  {
    case '1':
      Serial.println(F("S10"));
      _vehicleFuel = DIESEL_S10;
      break;
    case '2':
      Serial.println(F("S500"));
      _vehicleFuel = DIESEL_S500;
      break;
    default:
      loop();
    break;
  }
  Serial.println(_vehicleFuel);
  visorDrawMenu(SCREEN_PROGRESS);
  dataloggerWriteVehicle();
  // Monta o JSON para enviar para o Broker
  visorDrawMenu(SCREEN_PROGRESS);
  jsonPayload = jsonVehicleMount();
  Serial.println(jsonPayload);
  // enviar novo operador por mqtt para broker
    visorDrawMenu(SCREEN_PROGRESS);
  if(mqttSend(TOPIC_REGISTER, jsonPayload)){
    Serial.println("Eviou MQTT");
    visorDrawMenu(SCREEN_SUCCESS);
    somCerto();
    delay(1500);
    loop();
  }else{
    dataloggerWriteFailMqttLog(jsonPayload);
    Serial.println("Erro MQTT final");
    visorDrawMenu(SCREEN_SUCCESS);
    somCerto();
    delay(1500);
    loop();
  }
  delay(5000);
}




void visorMenuConfiguracao(){
  Serial.println(F(" ENTROU MENU CONFIGURACAO"));
  visorDrawMenu(SCREEN_MENU_CONFIGURACAO);
  do {
    tecla_presionada = keyboard.getKey();
  } while (!tecla_presionada);
  switch (tecla_presionada)
  {
    case '1':
      visorMenuAccesses(SCREEN_CONFIGURACAO_REGISTRO_CHOICE);
      Serial.println(F("BOTAO 1 - REGISTRO DE DISPOSITIVO"));
      break;
    case '2':
    case '4':
    case '5':
    case '6':
    case '7':
    case '8':
    case '9':
    case '0':
    case '*':
    case '#':
    case 'A':
    case 'B':
    case 'C':
    case 'D':
      Serial.println(F("SAIU DO MENU"));
      loop();
      break;
  }
}


void menuPermissionRegistration(){
  memset(_buffer, 0, sizeof(_buffer));  
  visorDrawMenu(SCREEN_MENU_CADASTRO_OPERADOR_READ_CARD);
  do {
    successRead =  rfidReaderGetID();
    tecla_presionada = keyboard.getKey();
    if ( tecla_presionada == '*') {
      Serial.println(F("CANCELADO"));
      loop();
    }
  } while (!successRead);
 tagUuid = rfidReaderIDValue;
 tagUuid.toCharArray(_buffer, 24);
  visorDrawMenu(SCREEN_MENU_CADASTRO_OPERADOR_READ_CARD);
  memset(_buffer, 0, sizeof(_buffer));
  delay(1200);
 //check if card exist
  visorDrawMenu(SCREEN_PROGRESS);
  if (!SD.begin(PIN_SS_DATA_LOG)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Erro no sistema para ler informacoes");
    delay(1500);
    loop();
  }
  if(!dataloggerCheckOperatorExist(tagUuid)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Cartao sem cadastro existente");
    delay(1500);
    loop();
  }
  if(dataloggerCheckOperatorIsAdmin(tagUuid)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Administrador");
    delay(1500);
    loop();
  }

  String _UUIDPermission = tagUuid;

  memset(_buffer, 0, sizeof(_buffer));  
  visorDrawMenu(SCREEN_MENU_CADASTRO_VEHICLE_READ_CARD);
  do {
    successRead =  rfidReaderGetID();
    tecla_presionada = keyboard.getKey();
    if ( tecla_presionada == '*') {
      Serial.println(F("CANCELADO"));
      loop();
    }
  } while (!successRead);
  tagUuid = rfidReaderIDValue;
  tagUuid.toCharArray(_buffer, 24);
  visorDrawMenu(SCREEN_MENU_CADASTRO_VEHICLE_READ_CARD);
  memset(_buffer, 0, sizeof(_buffer));
  delay(1200);
  visorDrawMenu(SCREEN_PROGRESS);
  if (!SD.begin(PIN_SS_DATA_LOG)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Erro no sistema para ler informacoes");
    delay(1500);
    loop();
  }
  if(!dataloggerCheckVehicleExist(tagUuid)){
    somErrado();
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Cartao sem cadastro existente");
    delay(1500);
    loop();
  }
  _UUIDPermission.concat(tagUuid);
  Serial.println(_UUIDPermission);

  dataloggerWritePermission();
  // Monta o JSON para enviar para o Broker
  visorDrawMenu(SCREEN_PROGRESS);
  jsonPayload = jsonPermissionMount();
  Serial.println(jsonPayload);
  // enviar novo operador por mqtt para broker
    visorDrawMenu(SCREEN_PROGRESS);
  if(mqttSend(TOPIC_REGISTER, jsonPayload)){
    Serial.println("Eviou MQTT");
    visorDrawMenu(SCREEN_SUCCESS);
    somCerto();
    delay(1500);
    loop();
  }else{
    dataloggerWriteFailMqttLog(jsonPayload);
    Serial.println("Erro MQTT final");
    visorDrawMenu(SCREEN_SUCCESS);
    somCerto();
    delay(1500);
    loop();
  }
  delay(5000);
}


void visorMenuAccesses(ScreenName nextScreen){
  _nextScreen = nextScreen;
  Serial.println(F("ENTROU NO MENU DE AUTORIZACAO DE ACESSO"));
  visorDrawMenu(SCREEN_ACCCESSES);
  do {
    tecla_presionada = keyboard.getKey();
  } while (!tecla_presionada);

  switch (tecla_presionada)
  {
    case '1':
      Serial.println(F("SENHA"));
      visorMenuAccesses(PASSWORD, _nextScreen);
      break;
    case '2':
      visorMenuAccesses(CARD, _nextScreen);
      Serial.println(F("CARTAO"));
      break;

    case '*':
      loop();
      Serial.println(F("CANCELAR"));
      break;
  }
}


void visorMenuAccesses(MetodeAccesses metode, ScreenName nextScreen){
  _nextScreen = nextScreen;
  bool _flag = false;

  switch (metode)
  {
    case CARD:
      memset(_buffer, 0, sizeof(_buffer));
      visorDrawMenu(SCREEN_ACCCESSES_CARD);
      if(accessValidate(metode)){
        Serial.println("Senha valida");
        _flag = true; 
      }else{
        Serial.println("Acesso negado");
        _flag = false;
      };
      break;
    case PASSWORD:
      memset(_buffer, 0, sizeof(_buffer));
      visorDrawMenu(SCREEN_ACCCESSES_PASSWORD);
      if(accessValidate(metode)){
        Serial.println("Senha valida");
        _flag = true;        
      }else{
        Serial.println("Acesso negado");
        _flag = false;
      }
      break;
    default:
      Serial.println(F("CANCELAR"));
      loop();    
      break;
  }
  Serial.println(F("teste"));
  if (_flag == true)
  {  
    switch (_nextScreen)
    {
      case SCREEN_MENU_CADASTRO_OPERADOR_CHOICE:
        visorDrawMenu(_nextScreen);
        do {
          tecla_presionada = keyboard.getKey();
        } while (!tecla_presionada);
        Serial.print("Tecla pressionada = ");
        Serial.println(tecla_presionada);
        switch (tecla_presionada)
        {
          case '1':
            visorMenuCadastroOperador();
            break;
          case '2':
            //[ ] implement metode to delete operator
            break;
          default:
            Serial.println(F("CANCELAR"));
            loop();
            break;
        }
        break;
      case SCREEN_MENU_CADASTRO_VEHICLE_CHOICE:
        visorDrawMenu(_nextScreen);
        do {
          tecla_presionada = keyboard.getKey();
        } while (!tecla_presionada);
        Serial.print("Tecla pressionada = ");
        Serial.println(tecla_presionada);
        switch (tecla_presionada)
        {
          case '1':
            visorMenuCadastroVeiculo();
            break;
          case '2':
            //[ ] implement metode to delete veichle
            break;
          default:
            Serial.println(F("CANCELAR"));
            loop();
            break;
        }
        break;
      case SCREEN_MENU_CADASTRO_PERMISSION_CHOICE:
        visorDrawMenu(_nextScreen);
        do {
          tecla_presionada = keyboard.getKey();
        } while (!tecla_presionada);
        Serial.print("Tecla pressionada = ");
        Serial.println(tecla_presionada);
        switch (tecla_presionada)
        {
          case '1':
            menuPermissionRegistration();
            break;
          default:
            Serial.println(F("CANCELAR"));
            loop();
            break;
        }
        break;
      case SCREEN_CONFIGURACAO_REGISTRO_CHOICE:
        visorDrawMenu(_nextScreen);
        do {
          tecla_presionada = keyboard.getKey();
        } while (!tecla_presionada);
        Serial.print("Tecla pressionada = ");
        Serial.println(tecla_presionada);
        switch (tecla_presionada)
        {
          case '1':
            menuAssignDeviceRegister();
            break;
          default:
            Serial.println(F("CANCELAR"));
            loop();
            break;
        }
        break;  
      default:
        loop();
        break;
    }
  }else{
    visorDrawMenu(SCREEN_ERROR);
    somErrado();
    delay(1500);
    loop();
  }
}



void visorMenuCadastroOperador(){
  memset(_buffer, 0, sizeof(_buffer));  
  visorDrawMenu(SCREEN_MENU_CADASTRO_OPERADOR_READ_CARD);
  do {
    successRead =  rfidReaderGetID();
    tecla_presionada = keyboard.getKey();
    if ( tecla_presionada == '*') {
      Serial.println(F("CANCELADO"));
      loop();
    }
  } while (!successRead);
  tagUuid = rfidReaderIDValue;
  tagUuid.toCharArray(_buffer, 24);
  visorDrawMenu(SCREEN_MENU_CADASTRO_OPERADOR_READ_CARD);
  memset(_buffer, 0, sizeof(_buffer));
  delay(1200);
 //check if card exist
  visorDrawMenu(SCREEN_PROGRESS);
  if (!SD.begin(PIN_SS_DATA_LOG)){
    somErrado();;
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Erro no sistema para gravar informacoes");
    delay(1500);
    loop();
  }
  if(dataloggerCheckOperatorExist(tagUuid)){
    somErrado();;
    visorDrawMenu(SCREEN_ERROR);
    Serial.println("Cartao com cadastro existente");
    delay(1500);
    loop();
  }
  _operatorName = keyboardGetKeyAlfanumeric(SCREEN_MENU_CADASTRO_OPERADOR_READ_NAME);
  _operatorName.trim();
  Serial.println("Nome = " + _operatorName);
 //enter operator level
  visorDrawMenu(SCREEN_MENU_CADASTRO_OPERADOR_READ_LEVEL);
  do {
    tecla_presionada = keyboard.getKey();  
  } while (!tecla_presionada);
  switch (tecla_presionada)
  {
    case '1':
      Serial.println(F("ADMINISTRADOR"));
      _operatorLevel = 1;
      break;
    case '2':
      Serial.println(F("FRENTISTA"));
      _operatorLevel = 2;
      break;
    case '3':
      Serial.println(F("MOTORISTA"));
      _operatorLevel = 3;
      break;
    default:
      loop();
    break;
  }
  Serial.println(_operatorLevel);
  // gravar novo operador no cartão SD
  visorDrawMenu(SCREEN_PROGRESS);
  dataloggerWriteOperator();
  // Monta o JSON para enviar para o Broker
    visorDrawMenu(SCREEN_PROGRESS);
  jsonPayload = jsonOperatorMount();
  Serial.println(jsonPayload);
  // enviar novo operador por mqtt para broker
    visorDrawMenu(SCREEN_PROGRESS);
  if(mqttSend(TOPIC_REGISTER, jsonPayload)){
    Serial.println("Eviou MQTT");
    visorDrawMenu(SCREEN_SUCCESS);
   somCerto();
    delay(1500);
    loop();
  }else{
    dataloggerWriteFailMqttLog(jsonPayload);
    Serial.println("Erro MQTT final");
    visorDrawMenu(SCREEN_SUCCESS);
   somCerto();
    delay(1500);
    loop();
  }
  loop();
}
